<!DOCTYPE HTML>
	<html>
	<head>
		
	<meta charset="utf-8">
	<meta name="apple-mobile-web-app-capable" content="yes" />
	
	<meta name="viewport" content="user-scalable=no, width=device-width" />
	
	<title>Remote control demo</title>

	<link rel="stylesheet" href="style/master.css">
	
	<!--<script type="text/javascript" src="http://use.typekit.com/rcl8zhz.js"></script>
	<script type="text/javascript">try{Typekit.load();}catch(e){}</script>-->
	<script type="text/javascript" src="http://cdn.hydna.com/1/hydna.js"></script>
	<script type="text/javascript" src="script/deps/jquery-1.7.2.min.js"></script>
	
	</head>
	
	<body>
		
		<h3 class="logo"><a href="http://www.hydna.com/" title="hydna"><img src="images/logo.png"></a></h3>
		
		<div id="reveal">
		    <div class="slides">
				<section>
					<h2>Hydna is a hosted platform that takes the pain out of building real-time-enabled websites and applications. We provide client libraries for several <a href="https://www.hydna.com/documentation/client-libraries/">languages</a>. It works well in all major <a href="https://www.hydna.com/features/">browsers</a>, mobile apps, desktop apps, and on the server-side</a>.</h2>
					
					
					<p>If you like you can control this slideshow with your phone, visit this page with your <strong>IOS</strong> or <strong>Android</strong> phone and enter the following code Â»</p>
					
					<p class="secret-code"><span id="secret_id">43525</span></p>
					
					<p class="note">slideshow code courtesy <a href="#">reveal.js</a></p>
					
				</section>
		        <section>
		        	<section>
					<h2>At it's core, Hydna is about immediate, bi-directional transmission of data between clients. In the context of a web site, you could make it possible for visitors of a page to communicate with each other instantly, without the need to reload said page; like in a <a href="http://hydna.github.com/forum/">chat</a> or a browser-based <a href="http://hydna.github.com/tartarus/">multiplayer-game</a>.</h2>
				   	<h3>A small javascript example:</h3>
				
					<div class="code highlight">
 					    <pre>
<span class="c1">// open a channel on the domain `public.hydna.net` in read and write mode.</span>
<span class="kd">var</span> <span class="nx">channel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HydnaChannel</span><span class="p">(</span><span class="s1">&#39;public.hydna.net/3617890511&#39;</span><span class="p">,</span> <span class="s1">&#39;rw&#39;</span><span class="p">);</span>

<span class="c1">// register an event handler that alerts the data-part of messages when</span>
<span class="c1">// they are received.</span>
<span class="nx">channel</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">alert</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// send a message immediately when the channel has been opened.</span>
<span class="nx">channel</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">channel</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;Hello there!&#39;</span><span class="p">);</span>
<span class="p">};</span></pre>   
					</div>
				
					<p class="footer">
						<span class="down">Hydna <strong>Push API</strong></a> examples</span>
					</p>
					</section>
					<section>
						
						<p class="header">
							<span class="up"><strong>Javascript</strong> example</span>
						</p>
						
						<h2>The Push API allows you to send messages and emit signals to channels without using a client library. It can also be used to build simple client libraries when you do not need the entire Hydna feature-set.</h2>

						<h3>Push API: <a href="https://www.hydna.com/documentation/client-libraries/push/">https://www.hydna.com/documentation/client-libraries/push/</a></h3>
						
						<h4>Send message:</h4>
						<div class="code highlight">
							<pre>curl --data <span class="s2">&quot;Hello World&quot;</span> http://public.hydna.net/1122556827/</pre>   
						</div>
						
						<h4>Emit signal:</h4>
						<div class="code highlight">
							
							<pre>curl -H <span class="s2">&quot;X-Emit: yes&quot;</span> --data <span class="s2">&quot;Hello World&quot;</span> http://public.hydna.net/1122556827/</pre>   
						</div>
						
						<p class="footer">
							<span class="down"><strong>Python</strong>, <strong>Ruby</strong> and </strong><strong>PHP</strong> <a href="#">Push API</a> examples</span>
						</p>
						
					</section>
					<section>
						
						<p class="header">
							<span class="up"><strong>Javascript</strong> example</span>
						</p>

						<h3>Python push example: <a href="https://github.com/hydna/hydna-python">https://github.com/hydna/hydna-python</a></h3>

						<div class="code highlight">
	 					    <pre><span class="kn">import</span> <span class="nn">hydna</span>

<span class="c1"># send a message</span>
<span class="n">hydna</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s">&#39;public.hydna.net/1122556827&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>

<span class="c1"># emit a signal</span>
<span class="n">hydna</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;public.hydna.net/1122556827&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span></pre>   
						</div>
						
						<h3>Ruby push example: <a href="https://github.com/hydna/hydna-ruby">https://github.com/hydna/hydna-ruby</a></h3>

						<div class="code highlight">
	 					    <pre><span class="kn">require</span> &#39;hydna&#39;

<span class="c1"># send a message</span>
<span class="n">Hydna</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="s">&#39;public.hydna.net/1122556827&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span>

<span class="c1"># emit a signal</span>
<span class="n">Hydna</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s">&#39;public.hydna.net/1122556827&#39;</span><span class="p">,</span> <span class="s">&#39;test&#39;</span><span class="p">)</span></pre>   
						</div>
						
						<p class="footer">
							<span class="down"><strong>PHP</strong> <a href="#">Push API</a> example</span>
						</p>
						
					</section>
					
					<section>
						
						<p class="header">
							<span class="up"><strong>Python</strong>, <strong>Ruby</strong> <a href="#">Push API</a> examples</span>
						</p>
						
					   	<h3>PHP push example: <a href="https://github.com/hydna/hydna-php">https://github.com/hydna/hydna-php</a></h3>
						<div class="code highlight">
	    					<pre><span class="nb">require</span><span class="p">(</span><span class="s">&quot;hydna-push.php&quot;</span><span class="p">);</span>

<span class="nv">$hydna</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Hydna</span><span class="p">();</span> 

<span class="n">try</span> <span class="p">{</span>
	<span class="sr">//</span> <span class="nb">send</span> <span class="n">a</span> <span class="n">message</span>
	<span class="nv">$hydna</span><span class="o">-&gt;</span><span class="nb">push</span><span class="p">(</span><span class="s">&quot;http://public.hydna.net/1122556828&quot;</span><span class="p">,</span> <span class="s">&quot;Hello World!&quot;</span><span class="p">);</span>

	<span class="sr">//</span> <span class="n">emit</span> <span class="n">a</span> <span class="n">signal</span>
	<span class="nv">$hydna</span><span class="o">-&gt;</span><span class="n">emit</span><span class="p">(</span><span class="s">&quot;http://public.hydna.net/1122556828&quot;</span><span class="p">,</span> <span class="s">&quot;Hello World!&quot;</span><span class="p">);</span>

<span class="p">}</span> <span class="n">catch</span><span class="p">(</span><span class="n">Exception</span> <span class="nv">$e</span><span class="p">){</span>
	<span class="k">print</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="n">getMessage</span><span class="p">();</span> 
<span class="p">}</span></pre>
</div>  				
					</section>
		
		        </section>
		        <section>
  					 <h2>A few terms you should familiarize yourself with, to featherbed further venturing:</h2>
					
					 <ul>

						<li>When you sign up for a plan, you receive what is referred to as a <em>domain</em>. Domains are regular, fully qualified domain names, that are used to identify your own isolated instance(s) within Hydna.</li>
							
						<li>To send or receive messages over Hydna you open a channel on your domain. Each <em>channel</em> is identified by an integer in the range <em>1 - 4294967295</em>. You can think of channels much like their radio counterparts: programs transmitted on a channel are received by listeners tuned in to the same channel. Channels are cheap you can open several thousand on each client!</li>
						
						<li>There are four different actions you can perform on a channel: <em>open</em>, <em>close</em>, send <em>message</em> and <em>emit</em> signal. You will receive events (or equivalent) when: messages or signals arrive, errors occur, and when a channel is closed.</li>
						
						<li>Channels are opened in different modes depending on what you intend to do (read and/or write for example).</li>
					 </li>
					 </ul>
					
		        </section>
		
				<section>
					<h2><a href="https://www.hydna.com/documentation/behaviors/introduction/">Behaviors</a> enable you to deploy custom logic to sand boxed environments hosted on Hydna's servers.</h2>
					
		            <p>Behaviors are used to instruct Hydna how to behave when actions (e.g. open requests, signals, client disconnects) are performed. It is also possible to "pipe" actions to scripts, giving you access to the power of a real programming environment.</p>
		
					<h3>Behaviors enable you to, among other things:</h3>

					<ul class="compact">
						<li>Write advanced routing schemes</li>
						<li>Authenticate connecting clients</li>
						<li>Disconnect connected clients</li>
						<li>Create arbitrary server-side logic</li>
						<li>Dispatch signals (events)</li>
						<li>Store state/session/connection data</li>
						<li>Connect to external services</li>
					</ul>
		            
					<p>The concept is described in it's entirety in the section <a href="https://www.hydna.com/documentation/behaviors/">Behaviors</a>.</p>
		
		        </section>
		
				<section>
                    
					<h2>Check out some of our demo applications below and then get yourself a <a href="https://www.hydna.com/account/signup/">free account and start playing around</a></h2>
					
					
					<h3>Demo applications: <a href="https://www.hydna.com/demos/">https://www.hydna.com/demos/</a></h3>
					
					<h3>Documentation: <a href="https://www.hydna.com/documentation/">https://www.hydna.com/documentation/</a></h3>
					
					<h3>Tutorials: <a href="https://www.hydna.com/documentation/tutorials/tutorials/">https://www.hydna.com/documentation/tutorials/tutorials/</a></h3>
					
					
		        </section>
		    </div>
		
			<!-- The navigational controls UI -->
			<aside class="controls">
				<a class="left" href="#">&#x25C4;</a>
				<a class="right" href="#">&#x25BA;</a>
				<a class="up" href="#">&#x25B2;</a>
				<a class="down" href="#">&#x25BC;</a>
			</aside>
		
			<div class="progress"><span></span></div>  
		
		</div>
		
		<script src="script/deps/reveal.js"></script>
		<script>
			
			if( navigator.userAgent.indexOf('iPhone') != -1 || navigator.userAgent.indexOf('iPod') != -1 || navigator.userAgent.indexOf('Android') != -1 ){           
				
				$('body').addClass( "mobile" );
				
				$('body').append("<div class='info'><span id='swipe_id'>Swipe to change slide</span><a href='#' id='reconnect_id'>Tap to Connect</a><span style='display: none;' id='loader_id' class='loader'></span></div>");
				
				$('#swipe_id').hide();
				
				var channel = null;
				var synctimer = null;
				var closetimer = null;
				var currentchannel = 0;
				
				var promptconnect = function(){
					
					var code = parseInt(prompt("Enter slideshow code", ""));
					
					if( !isNaN(code) && code > 1 && code != currentchannel ){
						
						
						if( channel ){
							channel.close();
						}
						
						var mychannel = String(code);
						
						$('#loader_id').show();
						$('#reconnect_id').hide();
						
						channel = new HydnaChannel('skaggivara.hydna.net/'+mychannel, 'rw');
						channel.onmessage = function(e) {
							
							switch( e.data ){
								case "synced":
								
								clearTimeout(synctimer);
								
								$('#reconnect_id').hide();
								$('#swipe_id').show();
								$('#loader_id').hide();
								
								break;
							}
							
						}
						
						channel.onopen = function(e){
							
							clearTimeout( closetimer );
							
							currentchannel = code; 
							
							channel.send( mychannel );
							
							clearTimeout(synctimer);
							synctimer = setTimeout( function(){
								
								$('#reconnect_id').show();
								$('#loader_id').hide();
								
							}, 2000 );
						}
						
						channel.onclose = function(e){
							
							clearTimeout( closetimer );
							closetimer = setTimeout( function(){
								$('#reconnect_id').show();
								$('#swipe_id').hide();
								$('#loader_id').hide();
							}, 2000 );
							
						}
						
					}else{
						if( code != "" ){
							if( code == currentchannel ){
								alert("You are already connected to this channel");
								channel.send( String(code) );
							}else{
								alert("Invalid channel");
							}
						}
					}
				};
				
				$('#reconnect_id').bind('touchstart', function(e){
					e.preventDefault();
					promptconnect();
				})
				
				var startx = 0;
				var starty = 0;
				var currentx = 0;
				var currenty = 0;
				
				$("body").bind("touchmove", function (event) {
					var e = event.originalEvent;
					
					if( e.targetTouches[0] ){
						currentx = e.targetTouches[0].pageX;
						currenty = e.targetTouches[0].pageY;
					}
				
					e.preventDefault();
				});
				
				$("body").bind("touchend", function (event) {
					
					if( startx != currentx || starty != currenty ){
						
						if( channel != null ){ 
							
							var dx = startx - currentx;
							var dy = starty - currenty;
						
							var angle = Math.atan2( dx, dy ) * (180/Math.PI);
						
							if( angle < 0 ){
							
								if( angle > -45 ){
									channel.send("down");
								}else if( angle < -135 ){
									channel.send("up");
								}else{
									channel.send("left");
								}
							
							}else{
							
								if( angle < 45 ){
									channel.send("down");
								}else if( angle > 135 ){
									channel.send("up");
								}else{
									channel.send("right");
								}
							}
						}   
					}
					
				});
				
				$("body").bind("touchstart", function (event) { 
					
					var e = event.originalEvent;
					if( e.targetTouches[0] ){
						startx = e.targetTouches[0].pageX;
						starty = e.targetTouches[0].pageY;
						currentx = startx;
						currenty = starty;
					}
					
					e.preventDefault();
				});
				
				promptconnect();
				
			}else{
				
				Reveal.initialize({
					controls: true,
					progress: true,
					history: true,
					mouseWheel: true,
					rollingLinks: true,
					theme: 'default',
					transition: 'default'
				});
				
				document.addEventListener( 'someState', function() {
				    // TODO: Sprinkle magic
					//console.log("state...");
				}, false );
			
			
				var mychannel = Math.round(Math.random() * 10000);
				var channel = null;
			
				$("#secret_id").html( mychannel );
				
				var synced = false; 
				var connect = function(){
					
					var channel = new HydnaChannel('skaggivara.hydna.net/'+mychannel, 'rw');
					channel.onmessage = function(e) {
						
						if( parseInt(e.data) == mychannel ){
							
							synced = true;	
							channel.send("synced");
							
						}else{
							
							if( synced ){
							   	switch( e.data ){
									case "left":
										Reveal.navigateLeft();
									break;
									case "right":
										Reveal.navigateRight();
									break;
									case "up":
										Reveal.navigateUp();
									break;
									case "down":
										Reveal.navigateDown();
									break;
									case "reset":
									    Reveal.navigateTo(0,0);
								   	break;
								}
							} 
						}
					}
				}
				
				connect();
			}
			
		</script>	
	</body>	
</html>